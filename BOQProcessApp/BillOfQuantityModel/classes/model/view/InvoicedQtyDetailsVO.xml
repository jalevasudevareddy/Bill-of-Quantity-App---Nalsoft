<?xml version="1.0" encoding="windows-1252" ?>
<!DOCTYPE ViewObject SYSTEM "jbo_03_01.dtd">
<!---->
<ViewObject
  xmlns="http://xmlns.oracle.com/bc4j"
  Name="InvoicedQtyDetailsVO"
  Version="11.1.1.66.73"
  InheritPersonalization="true"
  SelectList="XxboqInvoiceDetailsEO.BUSINESS_UNIT_ID, 
       XxboqInvoiceDetailsEO.CREATED_BY, 
       XxboqInvoiceDetailsEO.CREATION_DATE, 
       XxboqInvoiceDetailsEO.INVOICE_APPROVED_DATE, 
       XxboqInvoiceDetailsEO.INVOICE_DOCUMENT_DATE, 
       XxboqInvoiceDetailsEO.INVOICE_DOCUMENT_NUM, 
       XxboqInvoiceDetailsEO.INVOICE_HEADER_ID, 
       XxboqInvoiceDetailsEO.INVOICE_STATUS, 
       XxboqInvoiceDetailsEO.LAST_UPDATED_BY, 
       XxboqInvoiceDetailsEO.LAST_UPDATED_DATE, 
       XxboqInvoiceDetailsEO.PERIOD_OF_MEASURE, 
       XxboqInvoiceDetailsEO.PROJECT_ID, 
       XxboqInvoiceDetailsEO.INVOICE_APPROVED_BY, 
       XxboqInvoiceDetailsEO.VERSION, 
       XxinvBusinessUnitsEO.BU_NAME, 
       XxinvBusinessUnitsEO.BU_ID, 
       XxpjProjectsEO.PROJECT_NAME, 
       XxpjProjectsEO.PROJECT_ID AS PROJECT_ID1, 
       XxpjProjectsEO.PROJECT_NUMBER, 
       XxpjProjectsEO.DESCRIPTION, 
       XxboqInvoiceDetailsEO.MASTER_BOQ_HEADER_ID, 
       XxboqInvoiceDetailsEO.MASTER_INVOICE_HEADER_ID, 
       XxboqInvoiceDetailsEO.MASTER_WD_HEADER_ID, 
       XxboqInvoiceDetailsEO.PARENT_INVOICE_HEADER_ID, 
       XxboqInvoiceDetailsEO.WD_HEADER_ID, 
       ( SELECT   'Y'   FROM   dual   WHERE   EXISTS (     SELECT       1     FROM       XXBOQ_CERTIFIED_DETAILS_T     WHERE       certified_status IN (         'I',         'A'       )       AND invoice_header_id = XxboqInvoiceDetailsEO.INVOICE_HEADER_ID   ) ) AS REV_FLAG, 
       ( SELECT   CASE     WHEN (       SELECT         MAX(invoice_header_id) max_hdr_id       FROM         XXBOQ_INVOICE_DETAILS_T       WHERE         contract_id = XxboqInvoiceDetailsEO.contract_id         AND invoice_status != 'CL'     ) = XxboqInvoiceDetailsEO.invoice_header_id THEN 'Y'     ELSE 'N'   END   FROM   dual ) AS LATEST_DOC_FLAG, 
       (CASE WHEN  (SELECT   COUNT(1) FROM   XXBOQ_CERTIFIED_DETAILS_T CDT WHERE   CDT.INVOICE_HEADER_ID =XxboqInvoiceDetailsEO.INVOICE_HEADER_ID and CERTIFIED_STATUS!='CL')>0 THEN 'N' ELSE 'Y' END) AS REV_SELECT_FLAG, 
       (CASE WHEN TO_DATE(XxboqInvoiceDetailsEO.PERIOD_OF_MEASURE,'Mon-YYYY') &lt; (   SELECT     MAX(TO_DATE(CDT.PERIOD_OF_MEASURE,'Mon-YYYY') )   FROM     XXBOQ_CERTIFIED_DETAILS_T CDT   WHERE     CDT.contract_id = XxboqInvoiceDetailsEO.contract_id     AND CDT.CERTIFIED_STATUS &lt;> 'CL' ) THEN 'N' ELSE 'Y' END) AS VIEW_ATTR, 
       XxboqInvoiceDetailsEO.CURRENT_FLAG, 
       XxboqInvoiceDetailsEO.CURRENT_FLAG AS CURRENT_FLAG1, 
       ( SELECT   nvl(SUM(nvl(lines.SELLING_AMOUNT,0) ),0)     FROM  XXBOQ_BILL_OF_QTY_LINES_T lines     WHERE  lines.BOQ_HEADER_ID=XxboqInvoiceDetailsEO.BOQ_HEADER_ID AND lines.item IS NOT NULL and lines.bill_page_item is not null and lines.estimated = 'N') AS VIEW_ATTR, 
       (SELECT nvl( XxfiCurrenciesEO.PRECISION,2)    FROM XXFI_CURRENCIES_T XxfiCurrenciesEO WHERE XxfiCurrenciesEO.CURRENCY_CODE =ContractHeadersEO.currency_code and rownum=1) AS VIEW_ATTR, 
       (select OH.CUSTOMER_NAME from okc_k_headers_vl OH WHERE OH.CONTRACT_ID =XxboqInvoiceDetailsEO.CONTRACT_ID) AS VIEW_ATTR, 
       (select version from xxboq_bill_of_qty_hdr_t where boq_header_id = XxboqInvoiceDetailsEO.BOQ_HEADER_ID) AS VIEW_ATTR, 
       XxboqInvoiceDetailsEO.FILE_NAME, 
       (select case when at.Coun= 0 then 'None' when at.coun = 1 then (select atta.file_name from xx_attachments_t atta where atta.attachment_code='BOQ_Invoice' and atta.reference_id = XxboqInvoiceDetailsEO.INVOICE_HEADER_ID) else 'Multiple' end from (select count(att.attachment_id) coun from xx_attachments_t att where att.attachment_code='BOQ_Invoice' and att.reference_id = XxboqInvoiceDetailsEO.INVOICE_HEADER_ID) at) AS VIEW_ATTR, 
       XxpjProjectsEO.PROJECT_CURRENCY_CODE, 
       nvl((select sum(round(selling_amount,(select precision from xxfi_currencies_t where currency_code= ContractHeadersEO.currency_code))) from xxboq_bill_of_qty_lines_t where price_code is not null and line_type = 'M' and boq_header_id = XxboqInvoiceDetailsEO.BOQ_HEADER_ID),0) AS VIEW_ATTR, 
       nvl((select sum(round(selling_amount,(select precision from xxfi_currencies_t where currency_code= ContractHeadersEO.currency_code))) from xxboq_bill_of_qty_lines_t where price_code is not null and line_type = 'V' and estimated = 'N' and boq_header_id = XxboqInvoiceDetailsEO.BOQ_HEADER_ID),0) AS VIEW_ATTR, 
       nvl((select sum(round(selling_amount,(select precision from xxfi_currencies_t where currency_code= ContractHeadersEO.currency_code))) from xxboq_bill_of_qty_lines_t where price_code is not null and line_type = 'C' and estimated = 'N' and boq_header_id = XxboqInvoiceDetailsEO.BOQ_HEADER_ID),0) AS VIEW_ATTR, 
       XxboqInvoiceDetailsEO.RETENTION, 
       XxboqInvoiceDetailsEO.OTHER_PAYMENTS, 
       XxboqInvoiceDetailsEO.MATERIAL_AT_SITE, 
       XxboqInvoiceDetailsEO.ADVANCE_RECOVERED, 
       XxboqInvoiceDetailsEO.ADVANCE_RECEIVED, 
       (select status from xxboq_bill_of_qty_hdr_t where boq_header_id = XxboqInvoiceDetailsEO.BOQ_HEADER_ID) AS VIEW_ATTR, 
       XxboqInvoiceDetailsEO.APPLICATION_NUM, 
       XxboqInvoiceDetailsEO.DATE_OF_APPLICATION, 
       XxboqInvoiceDetailsEO.PAYMENT_DUE_DATE, 
       XxboqInvoiceDetailsEO.CONTRACT_ID, 
       ContractHeadersEO.COGNOMEN, 
       ContractHeadersEO.CONTRACT_ID AS CONTRACT_ID1, 
       ContractHeadersEO.CONTRACT_NUMBER, 
       ContractHeadersEO.CURRENCY_CODE, 
       XxboqInvoiceDetailsEO.VALUATION_DATE, 
       (select wd_document_num|| ', '  || version  from xxboq_work_done_details_t where wd_header_id=XxboqInvoiceDetailsEO.WD_HEADER_ID) AS VIEW_ATTR, 
       (select pc_document_num from xxboq_pc_hdr_t where pc_header_id= XxboqInvoiceDetailsEO.PREVIOUS_PC_HDR_ID        ) AS VIEW_ATTR, 
       (select certified_document_num from xxboq_certified_details_t where certified_header_id=XxboqInvoiceDetailsEO.PREVIOS_CERTIFIED_ID) AS VIEW_ATTR, 
       XxboqInvoiceDetailsEO.RETENTION_RELEASE, 
       ContractHeadersEO.ATTRIBUTE1, 
       ContractHeadersEO.PAYMENT_TERM_ID, 
       (select nvl(due_days,0) from xxra_terms_t where term_id= ContractHeadersEO.PAYMENT_TERM_ID) AS VIEW_ATTR, 
       (select nvl(due_days,0) from xxra_terms_t where name= ContractHeadersEO.Attribute1) AS VIEW_ATTR, 
       ( (     SELECT         nvl(SUM(nvl(il2.invoice_cummulative_qty, 0) * il2.current_boq_rate), 0)     FROM         xxboq_invoice_lines_t il2     WHERE         il2.invoice_header_id = xxboqinvoicedetailseo.invoice_header_id ) + xxboqinvoicedetailseo.material_at_site + xxboqinvoicedetailseo.advance_received - xxboqinvoicedetailseo.advance_recovered - xxboqinvoicedetailseo .retention + xxboqinvoicedetailseo.retention_release - xxboqinvoicedetailseo.other_payments - (     CASE         WHEN ( NOT EXISTS (             SELECT                 1             FROM                 xxcust.xxboq_certified_details_t   cd,                 xxboq_pc_hdr_t                     pc             WHERE                 cd.certified_header_id = pc.certified_header_id                 AND cd.certified_status = 'A'                 AND cd.current_flag = 'Y'                 AND cd.invoice_header_id = (                     SELECT                         MAX(idt.invoice_header_id)                     FROM                         xxboq_invoice_details_t idt                     WHERE                         idt.contract_id = xxboqinvoicedetailseo.contract_id                         AND TO_DATE(idt.period_of_measure, 'Mon-yy') &lt;= TO_DATE(xxboqinvoicedetailseo.period_of_measure, 'Mon-yy'                         )                         AND idt.invoice_header_id &lt; xxboqinvoicedetailseo.invoice_header_id                         AND idt.master_invoice_header_id &lt;> xxboqinvoicedetailseo.master_invoice_header_id                         AND idt.invoice_status = 'A'                         AND idt.current_flag = 'Y'                 )                 AND pc.pc_status = 'P'                 AND pc.ar_flag = 'Y'         )                    OR xxboqinvoicedetailseo.parent_invoice_header_id IS NULL ) THEN             ( nvl((                 SELECT                     nvl(SUM(nvl(il2.invoice_cummulative_qty, 0) * il2.current_boq_rate), 0)                 FROM                     xxboq_invoice_lines_t il2                 WHERE                     il2.invoice_header_id =(                         SELECT                             MAX(idt.invoice_header_id)                         FROM                             xxboq_invoice_details_t idt                         WHERE                             idt.contract_id = xxboqinvoicedetailseo.contract_id                             AND TO_DATE(idt.period_of_measure, 'Mon-yy') &lt;= TO_DATE(xxboqinvoicedetailseo.period_of_measure, 'Mon-yy'                             )                             AND idt.invoice_header_id &lt; xxboqinvoicedetailseo.invoice_header_id                             AND idt.master_invoice_header_id &lt;> xxboqinvoicedetailseo.master_invoice_header_id                             AND idt.invoice_status = 'A'                             AND idt.current_flag = 'Y'                     )             ), 0) + ( xxboqinvoicedetailseo.advance_received - nvl((                 SELECT                     idt1.advance_recovered                 FROM                     xxboq_invoice_details_t idt1                 WHERE                     idt1.invoice_header_id =(                         SELECT                             MAX(idt.invoice_header_id)                         FROM                             xxboq_invoice_details_t idt                         WHERE                             idt.contract_id = xxboqinvoicedetailseo.contract_id                             AND TO_DATE(idt.period_of_measure, 'Mon-yy') &lt;= TO_DATE(xxboqinvoicedetailseo.period_of_measure, 'Mon-yy'                             )                             AND idt.invoice_header_id &lt; xxboqinvoicedetailseo.invoice_header_id                             AND idt.master_invoice_header_id &lt;> xxboqinvoicedetailseo.master_invoice_header_id                             AND idt.invoice_status = 'A'                             AND idt.current_flag = 'Y'                     )             ), 0) ) + nvl((                 SELECT                     idt1.material_at_site - idt1.retention + idt1.retention_release-idt1.other_payments                 FROM                     xxboq_invoice_details_t idt1                 WHERE                     idt1.invoice_header_id =(                         SELECT                             MAX(idt.invoice_header_id)                         FROM                             xxboq_invoice_details_t idt                         WHERE                             idt.contract_id = xxboqinvoicedetailseo.contract_id                             AND TO_DATE(idt.period_of_measure, 'Mon-yy') &lt;= TO_DATE(xxboqinvoicedetailseo.period_of_measure, 'Mon-yy'                             )                             AND idt.invoice_header_id &lt; xxboqinvoicedetailseo.invoice_header_id                             AND idt.master_invoice_header_id &lt;> xxboqinvoicedetailseo.master_invoice_header_id                             AND idt.invoice_status = 'A'                             AND idt.current_flag = 'Y'                     )             ), 0) )         ELSE             ( nvl((                 SELECT                     SUM(                         CASE                             WHEN particulars IN(                                 'ADV_RECV', 'RET', 'OTH_DED'                             ) THEN                                 pl1.cummulative * - 1                             ELSE                                 pl1.cummulative                         END                     )                 FROM                     xxboq_pc_lines_t pl1                 WHERE                     particulars IN(                         'VOWD', 'MAT_AT_SITE', 'ADV', 'ADV_RECV', 'RET', 'RET_REL', 'OTH_DED'                     )                     AND pl1.pc_header_id =(                         SELECT                             pc.pc_header_id                         FROM                             xxcust.xxboq_certified_details_t   cd, xxboq_pc_hdr_t                     pc                         WHERE                             cd.certified_header_id = pc.certified_header_id                             AND cd.certified_status = 'A'                             AND cd.current_flag = 'Y'                             AND cd.invoice_header_id =(                                 SELECT                                     MAX(idt.invoice_header_id)                                 FROM                                     xxboq_invoice_details_t idt                                 WHERE                                     idt.contract_id = xxboqinvoicedetailseo.contract_id                                     AND TO_DATE(idt.period_of_measure, 'Mon-yy') &lt;= TO_DATE(xxboqinvoicedetailseo.period_of_measure                                     , 'Mon-yy')                                     AND idt.invoice_header_id &lt; xxboqinvoicedetailseo.invoice_header_id                                     AND idt.master_invoice_header_id &lt;> xxboqinvoicedetailseo.master_invoice_header_id                                     AND idt.invoice_status = 'A'                                     AND idt.current_flag = 'Y'                             )                             AND pc.pc_status = 'P'                             AND pc.ar_flag = 'Y'                     )             ), 0) )     END ) ) AS VIEW_ATTR, 
       XxboqInvoiceDetailsEO.PREVIOUS_PC_HDR_ID, 
       XxboqInvoiceDetailsEO.PREVIOS_CERTIFIED_ID, 
       XxboqInvoiceDetailsEO.NET_INVOICE_AMOUNT, 
       XxboqInvoiceDetailsEO.TOTAL_INVOICE_AMOUNT, 
       ((select  nvl(sum(nvl(il2.invoice_cummulative_qty,0)*il2.current_boq_rate),0) from xxboq_invoice_lines_t il2 where il2.invoice_header_id = XxboqInvoiceDetailsEO.invoice_header_id )+XxboqInvoiceDetailsEO.MATERIAL_AT_SITE +XxboqInvoiceDetailsEO.ADVANCE_RECEIVED- XxboqInvoiceDetailsEO.ADVANCE_RECOVERED-  XxboqInvoiceDetailsEO.RETENTION+XxboqInvoiceDetailsEO.RETENTION_RELEASE- XxboqInvoiceDetailsEO.OTHER_PAYMENTS) AS VIEW_ATTR, 
       XxboqInvoiceDetailsEO.ADJ_AMOUNT"
  FromList="XXBOQ_INVOICE_DETAILS_T XxboqInvoiceDetailsEO, XXINV_BUSINESS_UNITS_T XxinvBusinessUnitsEO, XXPJ_PROJECTS_T XxpjProjectsEO, OKC_K_HEADERS_VL ContractHeadersEO"
  BindingStyle="OracleName"
  CustomQuery="false"
  PageIterMode="Full"
  UseGlueCode="false"
  OrderBy="XxboqInvoiceDetailsEO.INVOICE_HEADER_ID desc"
  RowClass="model.view.InvoicedQtyDetailsVORowImpl"
  ComponentClass="model.view.InvoicedQtyDetailsVOImpl"
  Where="XxboqInvoiceDetailsEO.business_unit_id=XxinvBusinessUnitsEO.bu_id
and
XxboqInvoiceDetailsEO.project_id=XxpjProjectsEO.project_id(+)
and
XxboqInvoiceDetailsEO.CONTRACT_ID=ContractHeadersEO.CONTRACT_ID">
  <DesignTime>
    <Attr Name="_codeGenFlag2" Value="Access|Coll|VarAccess"/>
    <Attr Name="_isCodegen" Value="true"/>
  </DesignTime>
  <Variable
    Name="p_bu_id"
    Kind="viewcriteria"
    Type="java.lang.Long">
    <Properties>
      <SchemaBasedProperties>
        <DISPLAYHINT
          Value="Hide"/>
      </SchemaBasedProperties>
    </Properties>
  </Variable>
  <Variable
    Name="p_prj_id"
    Kind="viewcriteria"
    Type="java.lang.Long">
    <Properties>
      <SchemaBasedProperties>
        <DISPLAYHINT
          Value="Hide"/>
      </SchemaBasedProperties>
    </Properties>
  </Variable>
  <Variable
    Name="p_prj_num"
    Kind="viewcriteria"
    Type="java.lang.String">
    <Properties>
      <SchemaBasedProperties>
        <DISPLAYHINT
          Value="Hide"/>
      </SchemaBasedProperties>
    </Properties>
  </Variable>
  <EntityUsage
    Name="XxboqInvoiceDetailsEO"
    Entity="model.entity.XxboqInvoiceDetailsEO"/>
  <EntityUsage
    Name="XxinvBusinessUnitsEO"
    Entity="model.masterentity.XxinvBusinessUnitsEO"
    SourceUsage="model.view.InvoicedQtyDetailsVO.XxboqInvoiceDetailsEO"
    ReadOnly="true"
    Reference="true"
    DeleteParticipant="false">
    <DesignTime>
      <Attr Name="_customjoin" Value="true"/>
    </DesignTime>
  </EntityUsage>
  <EntityUsage
    Name="XxpjProjectsEO"
    Entity="model.masterentity.XxpjProjectsEO"
    SourceUsage="model.view.InvoicedQtyDetailsVO.XxinvBusinessUnitsEO"
    ReadOnly="true"
    Reference="true"
    DeleteParticipant="false">
    <DesignTime>
      <Attr Name="_customjoin" Value="true"/>
    </DesignTime>
  </EntityUsage>
  <EntityUsage
    Name="ContractHeadersEO"
    Entity="model.masterentity.ContractHeadersEO"
    SourceUsage="model.view.InvoicedQtyDetailsVO.XxpjProjectsEO"
    ReadOnly="true"
    Reference="true"
    DeleteParticipant="false"/>
  <ViewAttribute
    Name="BusinessUnitId"
    PrecisionRule="true"
    EntityAttrName="BusinessUnitId"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="BUSINESS_UNIT_ID"/>
  <ViewAttribute
    Name="CreatedBy"
    PrecisionRule="true"
    EntityAttrName="CreatedBy"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="CREATED_BY"
    IsUpdateable="false"/>
  <ViewAttribute
    Name="CreationDate"
    PrecisionRule="true"
    EntityAttrName="CreationDate"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="CREATION_DATE"
    IsUpdateable="false"/>
  <ViewAttribute
    Name="InvoiceApprovedDate"
    PrecisionRule="true"
    EntityAttrName="InvoiceApprovedDate"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="INVOICE_APPROVED_DATE">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="APPROVED_DATE"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="InvoiceDocumentDate"
    PrecisionRule="true"
    EntityAttrName="InvoiceDocumentDate"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="INVOICE_DOCUMENT_DATE"
    IsUpdateable="false">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="CREATION_DATE"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="InvoiceDocumentNum"
    PrecisionRule="true"
    EntityAttrName="InvoiceDocumentNum"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="INVOICE_DOCUMENT_NUM">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="DOCUMENT_NUMBER"/>
        <DISPLAYWIDTH
          Value="30"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="InvoiceHeaderId"
    PrecisionRule="true"
    EntityAttrName="InvoiceHeaderId"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="INVOICE_HEADER_ID"/>
  <ViewAttribute
    Name="InvoiceStatus"
    PrecisionRule="true"
    EntityAttrName="InvoiceStatus"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="INVOICE_STATUS">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="STATUS"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="LastUpdatedBy"
    PrecisionRule="true"
    EntityAttrName="LastUpdatedBy"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="LAST_UPDATED_BY"
    IsUpdateable="false"/>
  <ViewAttribute
    Name="LastUpdatedDate"
    PrecisionRule="true"
    EntityAttrName="LastUpdatedDate"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="LAST_UPDATED_DATE"
    IsUpdateable="false"/>
  <ViewAttribute
    Name="PeriodOfMeasure"
    PrecisionRule="true"
    EntityAttrName="PeriodOfMeasure"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="PERIOD_OF_MEASURE">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="PERIOD"/>
        <DISPLAYWIDTH
          Value="30"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="ProjectId"
    PrecisionRule="true"
    EntityAttrName="ProjectId"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="PROJECT_ID"/>
  <ViewAttribute
    Name="InvoiceApprovedBy"
    PrecisionRule="true"
    EntityAttrName="InvoiceApprovedBy"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="INVOICE_APPROVED_BY">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="APPROVED_BY"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="Version"
    PrecisionRule="true"
    EntityAttrName="Version"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="VERSION"/>
  <ViewAttribute
    Name="BuName"
    PrecisionRule="true"
    EntityAttrName="BuName"
    EntityUsage="XxinvBusinessUnitsEO"
    AliasName="BU_NAME"/>
  <ViewAttribute
    Name="BuId"
    PrecisionRule="true"
    EntityAttrName="BuId"
    EntityUsage="XxinvBusinessUnitsEO"
    AliasName="BU_ID"
    IsUpdateable="false"/>
  <ViewAttribute
    Name="ProjectName"
    PrecisionRule="true"
    EntityAttrName="ProjectName"
    EntityUsage="XxpjProjectsEO"
    AliasName="PROJECT_NAME"/>
  <ViewAttribute
    Name="ProjectId1"
    PrecisionRule="true"
    EntityAttrName="ProjectId"
    EntityUsage="XxpjProjectsEO"
    AliasName="PROJECT_ID1"
    IsUpdateable="false"/>
  <ViewAttribute
    Name="ProjectNumber"
    PrecisionRule="true"
    EntityAttrName="ProjectNumber"
    EntityUsage="XxpjProjectsEO"
    AliasName="PROJECT_NUMBER"/>
  <ViewAttribute
    Name="Description"
    PrecisionRule="true"
    EntityAttrName="Description"
    EntityUsage="XxpjProjectsEO"
    AliasName="DESCRIPTION"/>
  <ViewAttribute
    Name="TransStatus"
    IsSelected="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.lang.String"
    ColumnType="VARCHAR2"
    AliasName="VIEW_ATTR"
    SQLType="VARCHAR"
    Passivate="true">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="model.searchview.WorkDoneQtySearchVO.TransStatus_LABEL"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="MasterBoqHeaderId"
    PrecisionRule="true"
    EntityAttrName="MasterBoqHeaderId"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="MASTER_BOQ_HEADER_ID"/>
  <ViewAttribute
    Name="MasterInvoiceHeaderId"
    PrecisionRule="true"
    EntityAttrName="MasterInvoiceHeaderId"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="MASTER_INVOICE_HEADER_ID"/>
  <ViewAttribute
    Name="MasterWdHeaderId"
    PrecisionRule="true"
    EntityAttrName="MasterWdHeaderId"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="MASTER_WD_HEADER_ID"/>
  <ViewAttribute
    Name="ParentInvoiceHeaderId"
    PrecisionRule="true"
    EntityAttrName="ParentInvoiceHeaderId"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="PARENT_INVOICE_HEADER_ID"/>
  <ViewAttribute
    Name="WdHeaderId"
    PrecisionRule="true"
    EntityAttrName="WdHeaderId"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="WD_HEADER_ID"/>
  <ViewAttribute
    Name="TransReviseFlag"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.lang.String"
    ColumnType="CHAR"
    AliasName="REV_FLAG"
    SQLType="VARCHAR"
    Passivate="true"
    Expression="( SELECT   'Y'   FROM   dual   WHERE   EXISTS (     SELECT       1     FROM       XXBOQ_CERTIFIED_DETAILS_T     WHERE       certified_status IN (         'I',         'A'       )       AND invoice_header_id = XxboqInvoiceDetailsEO.INVOICE_HEADER_ID   ) )"/>
  <ViewAttribute
    Name="TransIsLatestDoc"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.lang.String"
    ColumnType="CHAR"
    AliasName="LATEST_DOC_FLAG"
    SQLType="VARCHAR"
    Passivate="true"
    Expression="( SELECT   CASE     WHEN (       SELECT         MAX(invoice_header_id) max_hdr_id       FROM         XXBOQ_INVOICE_DETAILS_T       WHERE         contract_id = XxboqInvoiceDetailsEO.contract_id         AND invoice_status != 'CL'     ) = XxboqInvoiceDetailsEO.invoice_header_id THEN 'Y'     ELSE 'N'   END   FROM   dual )"/>
  <ViewAttribute
    Name="TransReviseSelectFlag"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.lang.String"
    ColumnType="CHAR"
    AliasName="REV_SELECT_FLAG"
    SQLType="VARCHAR"
    Passivate="true"
    Expression="(CASE WHEN  (SELECT   COUNT(1) FROM   XXBOQ_CERTIFIED_DETAILS_T CDT WHERE   CDT.INVOICE_HEADER_ID =XxboqInvoiceDetailsEO.INVOICE_HEADER_ID and CERTIFIED_STATUS!='CL')>0 THEN 'N' ELSE 'Y' END)"/>
  <ViewAttribute
    Name="TransRevisePeriodFlag"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.lang.String"
    ColumnType="CHAR"
    AliasName="VIEW_ATTR"
    SQLType="VARCHAR"
    Passivate="true"
    Expression="(CASE WHEN TO_DATE(XxboqInvoiceDetailsEO.PERIOD_OF_MEASURE,'Mon-YYYY') &lt; (   SELECT     MAX(TO_DATE(CDT.PERIOD_OF_MEASURE,'Mon-YYYY') )   FROM     XXBOQ_CERTIFIED_DETAILS_T CDT   WHERE     CDT.contract_id = XxboqInvoiceDetailsEO.contract_id     AND CDT.CERTIFIED_STATUS &lt;> 'CL' ) THEN 'N' ELSE 'Y' END)"/>
  <ViewAttribute
    Name="CurrentFlag"
    PrecisionRule="true"
    EntityAttrName="CurrentFlag"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="CURRENT_FLAG"/>
  <ViewAttribute
    Name="CurrentFlag1"
    PrecisionRule="true"
    EntityAttrName="CurrentFlag"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="CURRENT_FLAG1"/>
  <ViewAttribute
    Name="TransContractValue"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.math.BigDecimal"
    ColumnType="BIGINT"
    AliasName="VIEW_ATTR"
    SQLType="NUMERIC"
    Passivate="true"
    Expression="( SELECT   nvl(SUM(nvl(lines.SELLING_AMOUNT,0) ),0)     FROM  XXBOQ_BILL_OF_QTY_LINES_T lines     WHERE  lines.BOQ_HEADER_ID=XxboqInvoiceDetailsEO.BOQ_HEADER_ID AND lines.item IS NOT NULL and lines.bill_page_item is not null and lines.estimated = 'N')">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="REVISED_CONTRACT_AMOUNT"/>
        <DISPLAYWIDTH
          Value="30"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="TransPrecision"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.math.BigDecimal"
    ColumnType="BIGINT"
    AliasName="VIEW_ATTR"
    SQLType="NUMERIC"
    Passivate="true"
    Expression="(SELECT nvl( XxfiCurrenciesEO.PRECISION,2)    FROM XXFI_CURRENCIES_T XxfiCurrenciesEO WHERE XxfiCurrenciesEO.CURRENCY_CODE =ContractHeadersEO.currency_code and rownum=1)"/>
  <ViewAttribute
    Name="TransCustomerName"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.lang.String"
    ColumnType="CHAR"
    AliasName="VIEW_ATTR"
    SQLType="VARCHAR"
    Passivate="true"
    Expression="(select OH.CUSTOMER_NAME from okc_k_headers_vl OH WHERE OH.CONTRACT_ID =XxboqInvoiceDetailsEO.CONTRACT_ID)">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="CUSTOMER_NAME"/>
        <DISPLAYWIDTH
          Value="30"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="TransBOQVersion"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.lang.String"
    ColumnType="CHAR"
    AliasName="VIEW_ATTR"
    SQLType="VARCHAR"
    Passivate="true"
    Expression="(select version from xxboq_bill_of_qty_hdr_t where boq_header_id = XxboqInvoiceDetailsEO.BOQ_HEADER_ID)">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="BOQ_VERSION"/>
        <DISPLAYWIDTH
          Value="30"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="FileName"
    PrecisionRule="true"
    EntityAttrName="FileName"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="FILE_NAME">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="FILE_NAME"/>
        <DISPLAYWIDTH
          Value="30"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="TransAttachments"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.lang.String"
    ColumnType="CHAR"
    AliasName="VIEW_ATTR"
    SQLType="VARCHAR"
    Passivate="true"
    Expression="(select case when at.Coun= 0 then 'None' when at.coun = 1 then (select atta.file_name from xx_attachments_t atta where atta.attachment_code='BOQ_Invoice' and atta.reference_id = XxboqInvoiceDetailsEO.INVOICE_HEADER_ID) else 'Multiple' end from (select count(att.attachment_id) coun from xx_attachments_t att where att.attachment_code='BOQ_Invoice' and att.reference_id = XxboqInvoiceDetailsEO.INVOICE_HEADER_ID) at)">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="ATTACHMENTS"/>
        <DISPLAYWIDTH
          Value="30"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="TransAttachmentCode"
    IsSelected="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.lang.String"
    ColumnType="VARCHAR2"
    AliasName="VIEW_ATTR"
    SQLType="VARCHAR"
    Passivate="true"/>
  <ViewAttribute
    Name="ProjectCurrencyCode"
    PrecisionRule="true"
    EntityAttrName="ProjectCurrencyCode"
    EntityUsage="XxpjProjectsEO"
    AliasName="PROJECT_CURRENCY_CODE"/>
  <ViewAttribute
    Name="TransMainContractAmount"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.math.BigDecimal"
    ColumnType="CHAR"
    AliasName="VIEW_ATTR"
    SQLType="NUMERIC"
    Passivate="true"
    Expression="nvl((select sum(round(selling_amount,(select precision from xxfi_currencies_t where currency_code= ContractHeadersEO.currency_code))) from xxboq_bill_of_qty_lines_t where price_code is not null and line_type = 'M' and boq_header_id = XxboqInvoiceDetailsEO.BOQ_HEADER_ID),0)">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="MAIN_CONTRACT"/>
        <DISPLAYWIDTH
          Value="30"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="TransVariationRevenueAmount"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.math.BigDecimal"
    ColumnType="BIGINT"
    AliasName="VIEW_ATTR"
    SQLType="NUMERIC"
    Passivate="true"
    Expression="nvl((select sum(round(selling_amount,(select precision from xxfi_currencies_t where currency_code= ContractHeadersEO.currency_code))) from xxboq_bill_of_qty_lines_t where price_code is not null and line_type = 'V' and estimated = 'N' and boq_header_id = XxboqInvoiceDetailsEO.BOQ_HEADER_ID),0)">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="VARIATIONS"/>
        <DISPLAYWIDTH
          Value="30"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="TransClaimsRevenueAmount"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.math.BigDecimal"
    ColumnType="BIGINT"
    AliasName="VIEW_ATTR"
    SQLType="NUMERIC"
    Passivate="true"
    Expression="nvl((select sum(round(selling_amount,(select precision from xxfi_currencies_t where currency_code= ContractHeadersEO.currency_code))) from xxboq_bill_of_qty_lines_t where price_code is not null and line_type = 'C' and estimated = 'N' and boq_header_id = XxboqInvoiceDetailsEO.BOQ_HEADER_ID),0)">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="CLAIMS"/>
        <DISPLAYWIDTH
          Value="30"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="Retention"
    PrecisionRule="true"
    EntityAttrName="Retention"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="RETENTION"/>
  <ViewAttribute
    Name="OtherPayments"
    PrecisionRule="true"
    EntityAttrName="OtherPayments"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="OTHER_PAYMENTS">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="OTHER_DEDUCTIONS"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="MaterialAtSite"
    PrecisionRule="true"
    EntityAttrName="MaterialAtSite"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="MATERIAL_AT_SITE">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="MATERIAL_AT_SITE"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="AdvanceRecovered"
    PrecisionRule="true"
    EntityAttrName="AdvanceRecovered"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="ADVANCE_RECOVERED">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="ADVANCE_RECOVERED"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="AdvanceReceived"
    PrecisionRule="true"
    EntityAttrName="AdvanceReceived"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="ADVANCE_RECEIVED">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="ADVANCE_RECEIVED"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="TransBOQSatus"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.lang.String"
    ColumnType="CHAR"
    AliasName="VIEW_ATTR"
    SQLType="VARCHAR"
    Passivate="true"
    Expression="(select status from xxboq_bill_of_qty_hdr_t where boq_header_id = XxboqInvoiceDetailsEO.BOQ_HEADER_ID)"/>
  <ViewAttribute
    Name="ApplicationNum"
    PrecisionRule="true"
    EntityAttrName="ApplicationNum"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="APPLICATION_NUM">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="APPLICATION_NUMBER"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="DateOfApplication"
    PrecisionRule="true"
    EntityAttrName="DateOfApplication"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="DATE_OF_APPLICATION">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="APPLICATION_DATE"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="PaymentDueDate"
    PrecisionRule="true"
    EntityAttrName="PaymentDueDate"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="PAYMENT_DUE_DATE">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="PAYMENT_DUE_DATE"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="ContractId"
    PrecisionRule="true"
    EntityAttrName="ContractId"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="CONTRACT_ID"/>
  <ViewAttribute
    Name="Cognomen"
    PrecisionRule="true"
    EntityAttrName="Cognomen"
    EntityUsage="ContractHeadersEO"
    AliasName="COGNOMEN"
    IsUpdateable="false">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="CONTRACT_NAME"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="ContractId1"
    PrecisionRule="true"
    EntityAttrName="ContractId"
    EntityUsage="ContractHeadersEO"
    AliasName="CONTRACT_ID1"
    IsUpdateable="false"/>
  <ViewAttribute
    Name="ContractNumber"
    PrecisionRule="true"
    EntityAttrName="ContractNumber"
    EntityUsage="ContractHeadersEO"
    AliasName="CONTRACT_NUMBER"
    IsUpdateable="false">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="CONTRACT_NUMBER"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="CurrencyCode"
    PrecisionRule="true"
    EntityAttrName="CurrencyCode"
    EntityUsage="ContractHeadersEO"
    AliasName="CURRENCY_CODE"/>
  <ViewAttribute
    Name="ValuationDate"
    PrecisionRule="true"
    EntityAttrName="ValuationDate"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="VALUATION_DATE">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="VALUATION_ASOF_DATE"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="TransWdDocuNumVersion"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.lang.String"
    ColumnType="CHAR"
    AliasName="VIEW_ATTR"
    SQLType="VARCHAR"
    Passivate="true"
    Expression="(select wd_document_num|| ', '  || version  from xxboq_work_done_details_t where wd_header_id=XxboqInvoiceDetailsEO.WD_HEADER_ID)">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="WORK_DONE_DOCUMENT_NUMBER__VER"/>
        <DISPLAYWIDTH
          Value="30"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="TransPreviousPCNum"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.lang.String"
    ColumnType="CHAR"
    AliasName="VIEW_ATTR"
    SQLType="VARCHAR"
    Passivate="true"
    Expression="(select pc_document_num from xxboq_pc_hdr_t where pc_header_id= XxboqInvoiceDetailsEO.PREVIOUS_PC_HDR_ID        )">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="PREVIOUS_PC_NUMBER"/>
        <DISPLAYWIDTH
          Value="30"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="TransPreviousCertifiedNum"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.lang.String"
    ColumnType="CHAR"
    AliasName="VIEW_ATTR"
    SQLType="VARCHAR"
    Passivate="true"
    Expression="(select certified_document_num from xxboq_certified_details_t where certified_header_id=XxboqInvoiceDetailsEO.PREVIOS_CERTIFIED_ID)">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="PREVIOUS_CERTIFIED_NUMBER"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="RetentionRelease"
    PrecisionRule="true"
    EntityAttrName="RetentionRelease"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="RETENTION_RELEASE">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="RETENTION_RELEASE"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="Attribute1"
    PrecisionRule="true"
    EntityAttrName="Attribute1"
    EntityUsage="ContractHeadersEO"
    AliasName="ATTRIBUTE1"/>
  <ViewAttribute
    Name="PaymentTermId"
    PrecisionRule="true"
    EntityAttrName="PaymentTermId"
    EntityUsage="ContractHeadersEO"
    AliasName="PAYMENT_TERM_ID"/>
  <ViewAttribute
    Name="TransPaymentTerms"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.math.BigDecimal"
    ColumnType="BIGINT"
    AliasName="VIEW_ATTR"
    SQLType="NUMERIC"
    Passivate="true"
    Expression="(select nvl(due_days,0) from xxra_terms_t where term_id= ContractHeadersEO.PAYMENT_TERM_ID)"/>
  <ViewAttribute
    Name="TransDFFDays"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.math.BigDecimal"
    ColumnType="CHAR"
    AliasName="VIEW_ATTR"
    SQLType="NUMERIC"
    Passivate="true"
    Expression="(select nvl(due_days,0) from xxra_terms_t where name= ContractHeadersEO.Attribute1)"/>
  <ViewAttribute
    Name="TransNetSum"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.math.BigDecimal"
    ColumnType="CHAR"
    AliasName="VIEW_ATTR"
    SQLType="NUMERIC"
    Passivate="true"
    Expression="( (     SELECT         nvl(SUM(nvl(il2.invoice_cummulative_qty, 0) * il2.current_boq_rate), 0)     FROM         xxboq_invoice_lines_t il2     WHERE         il2.invoice_header_id = xxboqinvoicedetailseo.invoice_header_id ) + xxboqinvoicedetailseo.material_at_site + xxboqinvoicedetailseo.advance_received - xxboqinvoicedetailseo.advance_recovered - xxboqinvoicedetailseo .retention + xxboqinvoicedetailseo.retention_release - xxboqinvoicedetailseo.other_payments - (     CASE         WHEN ( NOT EXISTS (             SELECT                 1             FROM                 xxcust.xxboq_certified_details_t   cd,                 xxboq_pc_hdr_t                     pc             WHERE                 cd.certified_header_id = pc.certified_header_id                 AND cd.certified_status = 'A'                 AND cd.current_flag = 'Y'                 AND cd.invoice_header_id = (                     SELECT                         MAX(idt.invoice_header_id)                     FROM                         xxboq_invoice_details_t idt                     WHERE                         idt.contract_id = xxboqinvoicedetailseo.contract_id                         AND TO_DATE(idt.period_of_measure, 'Mon-yy') &lt;= TO_DATE(xxboqinvoicedetailseo.period_of_measure, 'Mon-yy'                         )                         AND idt.invoice_header_id &lt; xxboqinvoicedetailseo.invoice_header_id                         AND idt.master_invoice_header_id &lt;> xxboqinvoicedetailseo.master_invoice_header_id                         AND idt.invoice_status = 'A'                         AND idt.current_flag = 'Y'                 )                 AND pc.pc_status = 'P'                 AND pc.ar_flag = 'Y'         )                    OR xxboqinvoicedetailseo.parent_invoice_header_id IS NULL ) THEN             ( nvl((                 SELECT                     nvl(SUM(nvl(il2.invoice_cummulative_qty, 0) * il2.current_boq_rate), 0)                 FROM                     xxboq_invoice_lines_t il2                 WHERE                     il2.invoice_header_id =(                         SELECT                             MAX(idt.invoice_header_id)                         FROM                             xxboq_invoice_details_t idt                         WHERE                             idt.contract_id = xxboqinvoicedetailseo.contract_id                             AND TO_DATE(idt.period_of_measure, 'Mon-yy') &lt;= TO_DATE(xxboqinvoicedetailseo.period_of_measure, 'Mon-yy'                             )                             AND idt.invoice_header_id &lt; xxboqinvoicedetailseo.invoice_header_id                             AND idt.master_invoice_header_id &lt;> xxboqinvoicedetailseo.master_invoice_header_id                             AND idt.invoice_status = 'A'                             AND idt.current_flag = 'Y'                     )             ), 0) + ( xxboqinvoicedetailseo.advance_received - nvl((                 SELECT                     idt1.advance_recovered                 FROM                     xxboq_invoice_details_t idt1                 WHERE                     idt1.invoice_header_id =(                         SELECT                             MAX(idt.invoice_header_id)                         FROM                             xxboq_invoice_details_t idt                         WHERE                             idt.contract_id = xxboqinvoicedetailseo.contract_id                             AND TO_DATE(idt.period_of_measure, 'Mon-yy') &lt;= TO_DATE(xxboqinvoicedetailseo.period_of_measure, 'Mon-yy'                             )                             AND idt.invoice_header_id &lt; xxboqinvoicedetailseo.invoice_header_id                             AND idt.master_invoice_header_id &lt;> xxboqinvoicedetailseo.master_invoice_header_id                             AND idt.invoice_status = 'A'                             AND idt.current_flag = 'Y'                     )             ), 0) ) + nvl((                 SELECT                     idt1.material_at_site - idt1.retention + idt1.retention_release-idt1.other_payments                 FROM                     xxboq_invoice_details_t idt1                 WHERE                     idt1.invoice_header_id =(                         SELECT                             MAX(idt.invoice_header_id)                         FROM                             xxboq_invoice_details_t idt                         WHERE                             idt.contract_id = xxboqinvoicedetailseo.contract_id                             AND TO_DATE(idt.period_of_measure, 'Mon-yy') &lt;= TO_DATE(xxboqinvoicedetailseo.period_of_measure, 'Mon-yy'                             )                             AND idt.invoice_header_id &lt; xxboqinvoicedetailseo.invoice_header_id                             AND idt.master_invoice_header_id &lt;> xxboqinvoicedetailseo.master_invoice_header_id                             AND idt.invoice_status = 'A'                             AND idt.current_flag = 'Y'                     )             ), 0) )         ELSE             ( nvl((                 SELECT                     SUM(                         CASE                             WHEN particulars IN(                                 'ADV_RECV', 'RET', 'OTH_DED'                             ) THEN                                 pl1.cummulative * - 1                             ELSE                                 pl1.cummulative                         END                     )                 FROM                     xxboq_pc_lines_t pl1                 WHERE                     particulars IN(                         'VOWD', 'MAT_AT_SITE', 'ADV', 'ADV_RECV', 'RET', 'RET_REL', 'OTH_DED'                     )                     AND pl1.pc_header_id =(                         SELECT                             pc.pc_header_id                         FROM                             xxcust.xxboq_certified_details_t   cd, xxboq_pc_hdr_t                     pc                         WHERE                             cd.certified_header_id = pc.certified_header_id                             AND cd.certified_status = 'A'                             AND cd.current_flag = 'Y'                             AND cd.invoice_header_id =(                                 SELECT                                     MAX(idt.invoice_header_id)                                 FROM                                     xxboq_invoice_details_t idt                                 WHERE                                     idt.contract_id = xxboqinvoicedetailseo.contract_id                                     AND TO_DATE(idt.period_of_measure, 'Mon-yy') &lt;= TO_DATE(xxboqinvoicedetailseo.period_of_measure                                     , 'Mon-yy')                                     AND idt.invoice_header_id &lt; xxboqinvoicedetailseo.invoice_header_id                                     AND idt.master_invoice_header_id &lt;> xxboqinvoicedetailseo.master_invoice_header_id                                     AND idt.invoice_status = 'A'                                     AND idt.current_flag = 'Y'                             )                             AND pc.pc_status = 'P'                             AND pc.ar_flag = 'Y'                     )             ), 0) )     END ) )">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="NET_AMOUNT"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="PreviousPcHdrId"
    PrecisionRule="true"
    EntityAttrName="PreviousPcHdrId"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="PREVIOUS_PC_HDR_ID"/>
  <ViewAttribute
    Name="PreviosCertifiedId"
    PrecisionRule="true"
    EntityAttrName="PreviosCertifiedId"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="PREVIOS_CERTIFIED_ID"/>
  <ViewAttribute
    Name="NetInvoiceAmount"
    PrecisionRule="true"
    EntityAttrName="NetInvoiceAmount"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="NET_INVOICE_AMOUNT"/>
  <ViewAttribute
    Name="TotalInvoiceAmount"
    PrecisionRule="true"
    EntityAttrName="TotalInvoiceAmount"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="TOTAL_INVOICE_AMOUNT"/>
  <ViewAttribute
    Name="TransTotalInvoiceAmount"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.math.BigDecimal"
    ColumnType="CHAR"
    AliasName="VIEW_ATTR"
    SQLType="NUMERIC"
    Passivate="true"
    Expression="((select  nvl(sum(nvl(il2.invoice_cummulative_qty,0)*il2.current_boq_rate),0) from xxboq_invoice_lines_t il2 where il2.invoice_header_id = XxboqInvoiceDetailsEO.invoice_header_id )+XxboqInvoiceDetailsEO.MATERIAL_AT_SITE +XxboqInvoiceDetailsEO.ADVANCE_RECEIVED- XxboqInvoiceDetailsEO.ADVANCE_RECOVERED-  XxboqInvoiceDetailsEO.RETENTION+XxboqInvoiceDetailsEO.RETENTION_RELEASE- XxboqInvoiceDetailsEO.OTHER_PAYMENTS)"/>
  <ViewAttribute
    Name="AdjAmount"
    PrecisionRule="true"
    EntityAttrName="AdjAmount"
    EntityUsage="XxboqInvoiceDetailsEO"
    AliasName="ADJ_AMOUNT">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="ADJUSTMENT"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewCriteria
    Name="InvoiceQtySearchLOV"
    ViewObjectName="model.view.InvoicedQtyDetailsVO"
    Conjunction="AND">
    <Properties>
      <CustomProperties>
        <Property
          Name="displayOperators"
          Value="InAdvancedMode"/>
        <Property
          Name="autoExecute"
          Value="false"/>
        <Property
          Name="showInList"
          Value="true"/>
        <Property
          Name="allowConjunctionOverride"
          Value="false"/>
        <Property
          Name="mode"
          Value="Basic"/>
      </CustomProperties>
    </Properties>
    <ViewCriteriaRow
      Name="vcrow567"
      UpperColumns="1">
      <ViewCriteriaItem
        Name="InvoiceQtyDetailsVOCriteria_vcrow567_BusinessUnitId"
        ViewAttribute="BusinessUnitId"
        Operator="="
        Conjunction="AND"
        Value=":p_bu_id"
        IsBindVarValue="true"
        Required="Optional">
        <Properties>
          <CustomProperties>
            <Property
              Name="renderedMode"
              Value="Never"/>
          </CustomProperties>
        </Properties>
      </ViewCriteriaItem>
      <ViewCriteriaItem
        Name="InvoiceDocumentNum"
        ViewAttribute="InvoiceDocumentNum"
        Operator="STARTSWITH"
        Conjunction="AND"
        Required="Optional"/>
      <ViewCriteriaItem
        Name="ProjectNumber"
        ViewAttribute="ProjectNumber"
        Operator="STARTSWITH"
        Conjunction="AND"
        Value=":p_prj_num"
        IsBindVarValue="true"
        Required="Optional">
        <Properties>
          <CustomProperties>
            <Property
              Name="renderedMode"
              Value="Never"/>
          </CustomProperties>
        </Properties>
      </ViewCriteriaItem>
    </ViewCriteriaRow>
  </ViewCriteria>
  <AttrArray Name="KeyAttributes">
    <Item Value="InvoiceHeaderId"/>
  </AttrArray>
  <ViewLinkAccessor
    Name="InvoicedQtyLinesVO"
    ViewLink="model.viewlink.InvoiceDetailsToLinesVL"
    Type="oracle.jbo.RowIterator"
    IsUpdateable="false"/>
  <ViewLinkAccessor
    Name="AttachmentsVO"
    ViewLink="model.viewlink.InvoiceToAttachmentsVL"
    Type="oracle.jbo.RowIterator"
    IsUpdateable="false"/>
  <ResourceBundle>
    <PropertiesBundle
      PropertiesFile="model.BillOfQuantityModelBundle"/>
  </ResourceBundle>
</ViewObject>
